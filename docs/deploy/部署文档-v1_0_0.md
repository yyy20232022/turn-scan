环境准备

mysql/ES/redis/xxljob

1.执行scan-v1.1.6.2.sql

2.上传scan-agent,scan-api,scan-job，docker编译打包

3.修改配置文件

scan-agent

#1.1.4配置已经迁移到apollo，以下为完整的配置模板，不想使用apollo，可使用以下配置即可
spring:
application:
name: scan-agent
#数据源配置
datasource:
url: jdbc:mysql://192.168.31.114:12012/scan_${profile}?useUnicode=true&characterEncoding=utf-8&useSSL=false&useTimezone=true&serverTimezone=GMT%2B8&allowMultiQueries=true
username: qiliu
password: qiliu123456
#Redis键配置
redis:
password: "ffca@sn!u934"
cluster:
nodes: 192.168.31.115:6381,192.168.31.115:6382,192.168.31.115:6383,192.168.31.115:6384,192.168.31.115:6385,192.168.31.115:6386
#ES索引配置
elasticsearch:
high-level-client:
hosts: 192.168.31.105:19200,192.168.31.105:29200,192.168.31.105:39200
port: 19200
schema: http
username:
password:
#PlatOn相关配置
platon:
# Web3j访问地址
web3j:
#HTTP或WS
protocol: WS
addresses: 192.168.31.117:7790
xxl:
job:
admin:
#调度中心部署跟地址
addresses: http://192.168.31.110:18080/xxl-job-admin
#调度中心通讯TOKEN
accessToken: qiliu123456
executor:
#执行器AppName
appname: platon-scan-agent
ip: 192.168.31.212


scan-api

#1.1.4配置已经迁移到apollo，以下为完整的配置模板，不想使用apollo，可使用以下配置即可
#Spring应用配置
spring:
application:
name: scan-api
#数据源配置
datasource:
url: jdbc:mysql://8.218.229.173:12010/scan_${profile}?useUnicode=true&characterEncoding=utf-8&useSSL=false&useTimezone=true&serverTimezone=GMT%2B8&allowMultiQueries=true
username: qiliu
password: qiliu123456
#Redis键配置
redis:
password: "ffca@sn!u934"
cluster:
max-redirects: 3
nodes: 8.218.229.173:6381,8.218.229.173:6382,8.218.229.173:6383,8.218.229.173:6384,8.218.229.173:6385,8.218.229.173:6386
#ES索引配置
elasticsearch:
high-level-client:
hosts: 8.218.229.173:19200,8.218.229.173:29200,8.218.229.173:39200
port: 19200
schema: http
username:
password:
#PlatOn相关配置
platon:
# Web3j访问地址
web3j:
#HTTP或WS
protocol: WS
addresses: 8.218.99.204:6790
public/config.json   修改配置相关链信息

{
"context":"/browser-server",
"siteName":"Bubble",
"headerChainName":"Bubble Test",#修改
"chainName":"Bubble",
"copyRight":"Bubble",
"logo":"/images/logo.svg",
"metamask":{
"title":

Unknown macro: { "en"}
,
"rpcUrl": "https://rpc-test.bubbonet.com", #修改
"chainId": "100",#修改
"chainName":"Bubble Test",#修改
"nativeCurrency":

Unknown macro: { "symbol"}
,
"blockExplorerUrl": "https://scan-test.bubbonet.com"#修改
},
"links": [
],
"social":[
{
"order": 1,
"name": "wechat",
"logo": "",
"qrcode": "/images/wechat.jpg",
"url":

Unknown macro: {"cn"}
}
]
}









scan-job

#1.1.4配置已经迁移到apollo，以下为完整的配置模板，不想使用apollo，可使用以下配置即可
spring:
application:
name: scan-job
#数据源配置
datasource:
url: jdbc:mysql://192.168.31.114:12012/scan_${profile}?useUnicode=true&characterEncoding=utf-8&useSSL=false&useTimezone=true&serverTimezone=GMT%2B8&allowMultiQueries=true
username: qiliu
password: qiliu123456
#ES索引配置
elasticsearch:
high-level-client:
hosts: 192.168.31.105:19200,192.168.31.105:29200,192.168.31.105:39200
port: 19200
schema: http
username:
password:
# 当前激活的配置名称(请不要修改)
profile: platon
#PlatOn相关配置
platon:
# 地址HRP前缀
addressPrefix: AA
# 金额显示单位
valueUnit: AA
# 交易输入参数并行解码线程数
txLogDecodeThreadNum: 200
# Web3j访问地址
web3j:
#HTTP或WS
protocol: WS
addresses: 192.168.31.117:7790
#链id
chainId: 100
xxl:
job:
admin:
#调度中心部署跟地址
addresses: http://192.168.31.110:18080/xxl-job-admin
#调度中心通讯TOKEN
accessToken: qiliu123456
executor:
#执行器AppName
appname: platon-scan-job
ip: 192.168.31.212
#执行器端口号
port: 9997


4.依次启动scan-agent,scan-api,scan-job

5.启动xxljob定时任务









scan-web


1、 拉取项目  http://192.168.31.12:10015/usafe-group/browser-web

2、项目 根目录执行 npm install

3、项目根目录 修改相应配置文件

          .env.production_test   #测试环境

          .env.production_uat    #uat环境

          .env.production        # 正式环境

      修改代码   

        VUE_APP_FAUCET_API_ROOT = "xxx"  # xxx为水龙头访问地址

4、执行打包命令 npm run build

5、将根目录下 dist 文件夹内容复制到 nginx 配置指定目录

6、启动nginx   
              

       

